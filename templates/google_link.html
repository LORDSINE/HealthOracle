{% extends "base.html" %}

{% block title %}Link Google Account - Health Oracle{% endblock %}

{% block body_class %} auth-page google-link-page{% endblock %}

{% block content %}
<section class="auth-shell">
    <!-- Brand Section -->
    <div class="brand brand--center">
        <div style="width: 56px; height: 56px; border-radius: 50%; background: linear-gradient(135deg, #60a5fa, #2563eb); display: grid; place-items: center; color: white; font-weight: 700; font-size: 24px; margin: 0 auto 12px; box-shadow: 0 10px 25px rgba(37, 99, 235, 0.3);" aria-hidden="true">âš¡</div>
        <div>
            <h1 class="brand__title" style="margin-bottom: 4px;">Link Google Account</h1>
            <p class="brand__eyebrow" style="margin: 0;">Complete your registration</p>
        </div>
    </div>

    <!-- Link Account Card -->
    <div class="card card--wide" style="max-width: 420px;">
        {% if error %}
        <div class="alert alert--error" role="alert" style="margin-bottom: 16px;">
            <strong>âš ï¸ Link Error:</strong> {{ error }}
        </div>
        {% endif %}

        <form class="form" method="POST" action="{{ url_for('google_link') }}" novalidate>
            <!-- Google Email Display -->
            <div class="info-block" style="background: linear-gradient(135deg, #f3f4f6 0%, #f9fafb 100%); border: 2px solid #e5e7eb;">
                <span class="info-block__label">ğŸ“§ Signing in with</span>
                <div class="info-block__value" style="color: #1f2937; word-break: break-all;">{{ email }}</div>
            </div>

            <!-- Patient ID Field -->
            <label class="field">
                <span class="field__label">ğŸ†” Your Patient ID</span>
                <input class="field__input" type="text" name="patient_id" placeholder="e.g., P001234" required autocomplete="username">
                <span class="helper-text" style="color: var(--muted); font-size: 12px; margin-top: 6px; display: block;">Link your Google account with your patient ID to continue</span>
            </label>

            <!-- Submit Button -->
            <button class="btn btn--primary" type="submit" style="width: 100%;">
                <span>âœ“ Continue with Google</span>
            </button>
        </form>

        <!-- Info Notice -->
        <div style="background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%); border: 2px solid #d1fae5; border-radius: 12px; padding: 14px; margin-top: 16px;">
            <div style="font-weight: 700; color: #047857; margin-bottom: 6px; font-size: 13px; display: flex; align-items: center; gap: 8px;">
                <span style="font-size: 16px;">ğŸ’¡</span> First time with Google?
            </div>
            <p style="color: #059669; font-size: 12px; margin: 0; line-height: 1.5;">
                If you don't have a patient ID yet, please go back and sign up first to create your account.
            </p>
        </div>

        <!-- Back Link -->
        <div style="text-align: center; margin-top: 16px;">
            <a class="link" href="{{ url_for('home') }}" style="font-size: 14px;">â† Choose Different Account</a>
        </div>
    </div>

    <!-- Disclaimer -->
    <p class="disclaimer" style="text-align: center; font-size: 12px;">
        ğŸ” Academic Research Project Â· Not for Clinical Use Â· Secure Account Linking
    </p>
</section>

<style>
    .google-link-page .card {
        animation: slideUp 0.5s ease-out;
    }
</style>
{% endblock %}
